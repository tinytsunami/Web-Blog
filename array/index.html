<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="hsl(210deg 20% 25%)">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="hsl(210deg 20% 25%)">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.tinytsunami.info","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="本篇是紀載了關於陣列的筆記；原本是跟指標寫在一起的，後來發現跑題太嚴重就獨立一篇出來了。">
<meta property="og:type" content="article">
<meta property="og:title" content="陣列 Array">
<meta property="og:url" content="https://www.tinytsunami.info/array/index.html">
<meta property="og:site_name" content="羊羽手札">
<meta property="og:description" content="本篇是紀載了關於陣列的筆記；原本是跟指標寫在一起的，後來發現跑題太嚴重就獨立一篇出來了。">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-09-21T00:00:00.000Z">
<meta property="article:modified_time" content="2022-02-12T08:41:13.195Z">
<meta property="article:author" content="Tinytusnami">
<meta property="article:tag" content="技術, 獨立遊戲">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.tinytsunami.info/array/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>陣列 Array | 羊羽手札</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">羊羽手札</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Tinytsunami's Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歷程表</a>

  </li>
        <li class="menu-item menu-item-game">

    <a href="https://tinytsunami.itch.io/" rel="noopener" target="_blank"><i class="fas fa-gamepad fa-fw"></i>遊戲</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://www.tinytsunami.info/array/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Tinytusnami">
      <meta itemprop="description" content="羊羽的個人部落格">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="羊羽手札">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          陣列 Array
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2021-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2021-09-21T00:00:00Z">2021-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-02-12 08:41:13" itemprop="dateModified" datetime="2022-02-12T08:41:13Z">2022-02-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/" itemprop="url" rel="index"><span itemprop="name">程式設計</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本篇是紀載了關於陣列的筆記；<br>原本是跟指標寫在一起的，後來發現跑題太嚴重就獨立一篇出來了。</p>
<span id="more"></span>

<div class="note warning">
            <p>為避免冗餘，本文的程式範例皆省略起始函數及標頭檔，即 <code>main</code> 跟 <code>include</code> 等程式碼請自行補完</p>
          </div>

<h1 id="陣列宣告"><a href="#陣列宣告" class="headerlink" title="陣列宣告"></a>陣列宣告</h1><p>陣列是一種基本的資料結構，它會分配「連續」的記憶體位置給開發者使用。<br>更簡單的說，就是宣告多筆「某種類型」的資料。</p>
<p>用 C 語言宣告陣列的例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">10</span>];                        <span class="comment">// 宣告陣列</span></span><br></pre></td></tr></table></figure>

<p>除此之外，宣告完陣列後，還會額外取得一個「指向陣列開頭」的指標，<br>具體而言，指向陣列開頭的意思是：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">10</span>];                        <span class="comment">// 宣告陣列</span></span><br><span class="line"><span class="keyword">if</span>(*arr == arr[<span class="number">0</span>]) <span class="built_in">printf</span>(<span class="string">&quot;Y&quot;</span>);     <span class="comment">// 印出 &quot;Y&quot;</span></span><br><span class="line"><span class="keyword">if</span>(arr == &amp;arr[<span class="number">0</span>]) <span class="built_in">printf</span>(<span class="string">&quot;Y&quot;</span>);     <span class="comment">// 印出 &quot;Y&quot;</span></span><br></pre></td></tr></table></figure>

<p>從這邊可以看出，陣列宣告時附贈的一個起始位置，是第一個元素的記憶體位置。</p>
<div class="note info">
            <p>注意 <code>arr[0]</code> 其實就是 <code>*(arr + 0)</code>；<br>同樣 <code>&amp;arr[0]</code> 也是 <code>&amp;(*(arr + 0))</code> 即 <code>arr + 0</code>。</p>
          </div>

<h1 id="陣列初始化"><a href="#陣列初始化" class="headerlink" title="陣列初始化"></a>陣列初始化</h1><p>通常來說，如果直接有要放入陣列的值，就直接放入了；<br>但有時會需要先準備空陣列的情況。</p>
<p>C 語言中一種常見的初始化方法是直接透過函數：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">memset</span>(arr, <span class="number">0</span>, <span class="number">10</span>); <span class="comment">// 初始化</span></span><br></pre></td></tr></table></figure>

<p>可是這個 <code>memset</code> 函數，實際上式定義在 <code>string.c</code> 下，目標是用於字串初始化的函數。</p>
<p>另一個比較奇怪的寫法是透過大括號：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> arr2[<span class="number">10</span>] = &#123;<span class="number">0</span>,&#125;; <span class="comment">// 或這種</span></span><br></pre></td></tr></table></figure>

<p>原理是根據 C99 標準，裡面有一段話：</p>
<blockquote><p>If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate, or fewer characters in a string literal used to initialize an array of known size than there are elements in the array, the remainder of the aggregate shall be initialized implicitly the same as objects that have static storage duration.</p>
</blockquote>

<p>意思是說，如果一個大括號封閉的初始化值「數量少於宣告的空間」的話，<br>那麼「剩下的」會初始化為 <code>0</code> 值。換句話說：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">10</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// 前三格為 1,2,3 剩下的 7 格會被初始化為 0</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;       <span class="comment">// 第 1 格為 0 剩下的 9 格會被初始化為 0</span></span><br></pre></td></tr></table></figure>

<p>另外下面 2 種寫法是有問題的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">10</span>] = <span class="number">0</span>;  <span class="comment">// Invalid initializer</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">10</span>] = &#123;&#125;; <span class="comment">// ISO C forbids empty initializer braces</span></span><br></pre></td></tr></table></figure>

<p>但 GCC 針對 <code>&#123;&#125;</code> 會自動將陣列初始化為 <code>0</code> 值。</p>
<h1 id="傳遞陣列"><a href="#傳遞陣列" class="headerlink" title="傳遞陣列"></a>傳遞陣列</h1><p>由於陣列有多個元素，傳遞給函數時，可以直接給一個起始位置：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_one</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">        arr[i]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;  <span class="comment">// 初始化為 0</span></span><br><span class="line"><span class="built_in">add_one</span>(x, <span class="number">10</span>);   <span class="comment">// 傳入函數，每個位置都加 1</span></span><br></pre></td></tr></table></figure>

<p>這裡希望大家把指標當成是一般的變數（存位置而已）<br>所以所謂的「傳陣列」其實就是把 <code>起始位置</code> 跟 <code>大小</code> 傳入函數。</p>
<p>另一個常見的傳入方式是 <code>起始位置</code> 跟 <code>結束位置</code> 的方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_one</span><span class="params">(<span class="type">int</span> *begin, <span class="type">int</span> *end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> *tmp = begin; tmp &lt; end; tmp++)</span><br><span class="line">        (*tmp)++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;    <span class="comment">// 初始化為 0</span></span><br><span class="line"><span class="built_in">add_one</span>(x, x+<span class="number">10</span>);   <span class="comment">// 傳入函數，每個位置都加 1</span></span><br></pre></td></tr></table></figure>

<div class="note warning">
            <p>通常第二種傳法的 <code>結束位置</code> 是再後一格的位置；<br>通常 <code>x[10]</code> 的結束是 <code>x+10</code> 可是最後可存取的位置是 <code>x+9</code>；<br>像是 C++ 的 algorithm 的 sort 函數就是第二種。</p>
          </div>

<div class="note info">
            <p>對指標做加法，像 <code>x[10]</code> 的 <code>x+1</code> 意思是 <code>x</code>（起始位置）的下 <code>1</code> 格，<br>實際位置偏移 <code>sizeof(int)</code> 而不是 <code>1</code>。</p>
          </div>

<h1 id="字元陣列"><a href="#字元陣列" class="headerlink" title="字元陣列"></a>字元陣列</h1><p>在 C 語言中，用字元陣列來表示字串（string），<br>所有字串相關的函數都放在 <code>&lt;string.h&gt;</code> 中，只要符合：</p>
<ul>
<li>它是一個字元陣列</li>
<li>它尾末有一個 <code>\0</code>（<code>0x00</code>） 結束符</li>
</ul>
<p>都可以直接視做字串；<br>反過來說，字串可以視為一種特別的字元陣列。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">20</span>] = <span class="string">&quot;hello world&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x7fffffffdc70</span>: <span class="number">0x68</span>  <span class="number">0x65</span>  <span class="number">0x6c</span>  <span class="number">0x6c</span>  <span class="number">0x6f</span>  <span class="number">0x20</span>  <span class="number">0x77</span>  <span class="number">0x6f</span></span><br><span class="line"><span class="number">0x7fffffffdc78</span>: <span class="number">0x72</span>  <span class="number">0x6c</span>  <span class="number">0x64</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br><span class="line"><span class="number">0x7fffffffdc80</span>: <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0xff</span>  <span class="number">0x7f</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br></pre></td></tr></table></figure>

<p>看起來他存的是 <code>0x68  0x65  0x6c  0x6c  0x6f  0x20  0x77  0x6f 0x72  0x6c  0x64</code><br>這個數字叫作「ASCII」他們一一對應剛剛的 <code>hello world</code>。</p>
<div class="note info">
            <p>請參考 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ASCII">Wikipedia: ASCII</a></p>
          </div>

<p>從 <code>0x7fffffffdc70</code> 到 <code>0x7fffffffdc83</code> 共 20 格是我們可以用的範圍。</p>
<div class="note info">
            <p>因為是 16 進位，數學應該沒問題吧？ <code>0x83 - 0x70 = 0x13</code><br>換成 10 進位，所以 <code>1 * 16 + 3 = 19</code> 恩？少了一格？</p><p>其實用註標相減要再加 1（也就說 <code>0x83 - 0x70 + 0x01 = 0x14</code> 才對）<br>考慮「1, 2, 3，一共有幾個數字？」這種簡化的問題就很清楚了。</p>
          </div>

<p>也可以顯式地將尾末的結束符寫出：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">20</span>] = <span class="string">&quot;hello world\0&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>看了上例就會知道，這個 <code>str</code> 其實只能放 19 個字，不要多放了！</p>
<p>這一節最後來疑難排解一些常見的問題：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">3</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, str); <span class="comment">// 0x7fffffffdc89</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str); <span class="comment">// abc</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>嘿？不是只能放 2 個字嗎？為什麼可以正常顯示？<br>說起來是這樣的，因為「恰巧」他的下一位是 <code>0x00</code>（<code>\0</code>）</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x7fffffffdc80</span>:  <span class="number">0x80</span>  <span class="number">0xdd</span>  <span class="number">0xff</span>  <span class="number">0xff</span>  <span class="number">0xff</span>  <span class="number">0x7f</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br><span class="line"><span class="number">0x7fffffffdc88</span>:  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x61</span>  <span class="number">0x62</span>  <span class="number">0x63</span></span><br><span class="line"><span class="number">0x7fffffffdc90</span>:  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br></pre></td></tr></table></figure>

<p>既然已知電腦會配置連續記憶體，那來做個實驗，我們插入一行：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">3</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">48</span>;          <span class="comment">// 48 對應的字元為 &quot;0&quot;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, str); <span class="comment">// 0x7fffffffdc89</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str); <span class="comment">// abc0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>記憶體中：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x7fffffffdc80</span>:  <span class="number">0x80</span>  <span class="number">0xdd</span>  <span class="number">0xff</span>  <span class="number">0xff</span>  <span class="number">0xff</span>  <span class="number">0x7f</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br><span class="line"><span class="number">0x7fffffffdc88</span>:  <span class="number">0x00</span>  <span class="number">0x61</span>  <span class="number">0x62</span>  <span class="number">0x63</span>  <span class="number">0x30</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  </span><br><span class="line"><span class="number">0x7fffffffdc90</span>:  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span>  <span class="number">0x00</span></span><br></pre></td></tr></table></figure>

<p>真不巧，剛剛的輸出為 <code>abc0</code>，<br>因為記憶體中，下一位「恰好」是我們塞進去的那個 <code>48</code> 對應的 ASCII 為字元「0」。<br>也許我們還是手動加個 <code>\0</code> 阻止這種事情發生比較好。</p>
<p>關於長度的定義：</p>
<ul>
<li><code>字串長度</code> 為「字串開頭」直到「<code>\0</code>（這傢伙不算在內）」為止的長度</li>
<li><code>字元陣列長度</code> 為「宣告的字元陣列的大小」</li>
</ul>
<p>前者透過 <code>&lt;string.h&gt;</code> 的函數 <code>strlen</code> 取得，後者則是透過 <code>sizeof</code> 取得。<br>綜上所述，要是你沒有手動放 <code>\0</code> 又「恰巧」後面不為 <code>\0</code> 的話，你就會拿到完全不對的結果。</p>
<p>注意 <code>char s1[]</code> 跟 <code>char *s2</code>本質上是有差異的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> s1[] = <span class="string">&quot;hello&quot;</span>; <span class="comment">// 是指宣告一個字元陣列放 &#123;&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;\0&#x27;&#125;</span></span><br><span class="line"><span class="type">char</span> *s2 = <span class="string">&quot;hello&quot;</span>;  <span class="comment">// 是指宣告一個指標，指向 &quot;hello&quot; 靜態空間的起始位置</span></span><br><span class="line"></span><br><span class="line">s1[<span class="number">0</span>] = <span class="string">&#x27;p&#x27;</span>;         <span class="comment">// 可修改，印出會是 &quot;pello&quot;</span></span><br><span class="line">s2[<span class="number">0</span>] = <span class="string">&#x27;n&#x27;</span>;         <span class="comment">// 不可修改，會出錯</span></span><br></pre></td></tr></table></figure>

<h1 id="多維陣列"><a href="#多維陣列" class="headerlink" title="多維陣列"></a>多維陣列</h1><p>C 語言的初學者常常會卡在多維陣列一段時間，但多維陣列的本質就是一維陣列（應該要視為記憶體中的一塊空間）來看待。</p>
<p>雖然說是多維，但實際上筆者除寫 Python 外，很少看過超過 3 維以上的陣列（或列表、張量）結構，<br>比較常見的多維陣列可能是 2 至 3 維，初學可以把它當成「陣列的陣列」來看：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">10</span>][<span class="number">10</span>];     <span class="comment">// 一個二維陣列</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">10</span>][<span class="number">10</span>][<span class="number">10</span>]; <span class="comment">// 一個三維陣列</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取 arr1 的第 6 個陣列，再存取第 4 個值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr1[<span class="number">5</span>][<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取 arr2 的第 2 個陣列的陣列、再存取第 3 個陣列、再存取第 4 個值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr2[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取 arr1 的第 7 個陣列（起始位置）</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, arr1[<span class="number">6</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="一維轉換"><a href="#一維轉換" class="headerlink" title="一維轉換"></a>一維轉換</h2><p>多維陣列轉換成一維在 2D 遊戲中是非常常用的概念，<br>主要是用來算圖片編號、用來記錄地圖位置等等。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">100</span>];    <span class="comment">// 一維陣列</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">10</span>][<span class="number">10</span>]; <span class="comment">// 二維陣列</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 將 arr1 的值塞給 arr2</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> y = i / <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> x = i % <span class="number">10</span>;</span><br><span class="line">    arr2[y][x] = arr1[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 將 arr2 的值塞給 arr1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> y = <span class="number">0</span>; y &lt; <span class="number">10</span>; y++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++)</span><br><span class="line">        arr1[y * <span class="number">10</span> + x] = arr2[y][x];</span><br></pre></td></tr></table></figure>

<p>更多維度也是同理（以四維為例）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr1[<span class="number">120</span>];        <span class="comment">// 一維陣列</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>]; <span class="comment">// 多維陣列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">120</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = (i / (<span class="number">3</span> * <span class="number">4</span> * <span class="number">5</span>));</span><br><span class="line">    <span class="type">int</span> b = (i /     (<span class="number">4</span> * <span class="number">5</span>)) % <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> c = (i /         (<span class="number">5</span>)) % <span class="number">4</span>;</span><br><span class="line">    <span class="type">int</span> d = (i              ) % <span class="number">5</span>;</span><br><span class="line">    arr2[a][b][c][d] = arr1[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>多維轉換的核心想法是算這個註標分成幾塊會是第幾個。</p>
<p>以 arr1[100] 為例，而 arr2 有：</p>
<ul>
<li>arr2[0] 是一個共 3*4*5 &#x3D; 60 個元素的陣列</li>
<li>arr2[1] 是一個共 3*4*5 &#x3D; 60 個元素的陣列</li>
</ul>
<p>共 100 個元素，每 60 個放一組，逢 2 循環（僅 1 輪），顯然放在 arr2[(100&#x2F;60)%2] 中。</p>
<p>接下來考慮 arr2 有：</p>
<ul>
<li>arr2[0][0] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
<li>arr2[0][1] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
<li>arr2[0][2] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
<li>arr2[1][0] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
<li>arr2[1][1] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
<li>arr2[1][2] 是一個共 4*5 &#x3D; 20 個元素的陣列</li>
</ul>
<p>共 100 個元素每 20 個放一組，逢 3 循環（僅 2 輪），顯然放在 arr2[1][(100&#x2F;20)%3] 中。</p>
<p>以此類推。</p>
<h2 id="行列優先序"><a href="#行列優先序" class="headerlink" title="行列優先序"></a>行列優先序</h2><p>行列優先序（Row- &#x2F; Column- major order）是指安排記憶體的方式，由於高階語言的特性，所以理論上抽象的記憶體位置是不影響存取的，作業系統會自動幫你處理這個部分，但符合底層設計的程式會有更好的效能。</p>
<div class="note info">
            <p>主要的原因是機器跟作業系統的設計，牽涉記憶體的分層架構（hierarchical architecture）在空間區域性（locality of space）下，讀取時會抓一大塊資料（分頁）到快取記憶體。</p><p>此時要是空間區域性失效，即每次存取的值都在不同的分頁中，就會導致大量的分頁錯誤（page faults）讓作業系統需要大量中斷（interrupt）來幫你處理，具體來說就是把正確的分頁放到快取中，這個狀態被稱為「顛簸（thrashing）」。</p>
          </div>

<p>來看例子，下面的程式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N (1000000)</span></span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[N][N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; j++)</span><br><span class="line">        arr[i][j] = i * N + j;</span><br></pre></td></tr></table></figure>

<p>會快過下面這個： </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N (1000000)</span></span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[N][N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; j++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        arr[i][j] = i * N + j;</span><br></pre></td></tr></table></figure>

<h2 id="傳遞多維陣列"><a href="#傳遞多維陣列" class="headerlink" title="傳遞多維陣列"></a>傳遞多維陣列</h2><p>傳遞多維陣列到函數，總共有三種方法：</p>
<p>第一種是維持陣列的樣貌：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> arr[][<span class="number">2</span>][<span class="number">3</span>])</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">f(arr);</span><br></pre></td></tr></table></figure>

<p>很明顯，這個函數告訴你要準備傳入一個陣列，通常會搭配長度來使用：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> arr[][<span class="number">2</span>][<span class="number">3</span>], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">f(arr, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>第二種是將 <code>[]</code> 改成指標 <code>*</code> 的形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> *arr[<span class="number">2</span>][<span class="number">3</span>])</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">f(arr);</span><br></pre></td></tr></table></figure>

<p>但這個看起來就像是在說「我要傳入 2*3 個 int 指標」而不是我要傳入多維陣列。</p>
<p>最後一個則是單個參數中，不提供任何大小訊息，<br>直接傳遞起始位置，將整個陣列當成指標來用：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> ***arr)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> arr[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">f(arr);</span><br></pre></td></tr></table></figure>

<div class="note info">
            <p>除指標外，其他的核心要旨都是「除第一個維度外，其他維度都要顯式寫出。」</p>
          </div>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/divide-and-partition/" rel="prev" title="分治與分割 Divide and Partition">
      <i class="fa fa-chevron-left"></i> 分治與分割 Divide and Partition
    </a></div>
      <div class="post-nav-item">
    <a href="/newton-method-sqrt/" rel="next" title="牛頓法計算 sqrt 函數">
      牛頓法計算 sqrt 函數 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%A3%E5%88%97%E5%AE%A3%E5%91%8A"><span class="nav-number">1.</span> <span class="nav-text">陣列宣告</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%A3%E5%88%97%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">2.</span> <span class="nav-text">陣列初始化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%82%B3%E9%81%9E%E9%99%A3%E5%88%97"><span class="nav-number">3.</span> <span class="nav-text">傳遞陣列</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E5%85%83%E9%99%A3%E5%88%97"><span class="nav-number">4.</span> <span class="nav-text">字元陣列</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E7%B6%AD%E9%99%A3%E5%88%97"><span class="nav-number">5.</span> <span class="nav-text">多維陣列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E7%B6%AD%E8%BD%89%E6%8F%9B"><span class="nav-number">5.1.</span> <span class="nav-text">一維轉換</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%8C%E5%88%97%E5%84%AA%E5%85%88%E5%BA%8F"><span class="nav-number">5.2.</span> <span class="nav-text">行列優先序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%82%B3%E9%81%9E%E5%A4%9A%E7%B6%AD%E9%99%A3%E5%88%97"><span class="nav-number">5.3.</span> <span class="nav-text">傳遞多維陣列</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tinytusnami"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">Tinytusnami</p>
  <div class="site-description" itemprop="description">羊羽的個人部落格</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tinytsunami" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tinytsunami" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/TaipeiTsunami" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;TaipeiTsunami" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/profile.php?id=100000736195394" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100000736195394" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCtqp9w_uA_LohDm0YXNWqSA" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCtqp9w_uA_LohDm0YXNWqSA" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友站連結
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.eevee.tw/" title="https:&#x2F;&#x2F;blog.eevee.tw&#x2F;" rel="noopener" target="_blank">Cyris's Blog</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-bomb"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tinytusnami</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '32px',
  right: '32px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#333',
  buttonColorLight: '#eee',
  saveInCookies: true,
  label: '',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '8b224f954e247f37ca81',
      clientSecret: '36ffe64406d0cfaa8d1811ebf27c58638876fc8d',
      repo        : 'tinytsunami.github.io',
      owner       : 'tinytsunami',
      admin       : ['tinytsunami'],
      id          : 'b172b1dc41b4aa4a2441977ad0e70191',
        language: 'zh-TW',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>
<script>
(function() {

  const callback = function() {
    let html = document.getElementsByTagName('html')[0];
    //let head = document.getElementsByClassName('site-author-image')[0];

    if (window.darkmode.isActivated()) {  
      html.setAttribute("class", "darkmode--activated");
      //head.setAttribute("src", "/images/head-dark.jpg");
    }
    else {
      html.removeAttribute("class");
      //head.setAttribute("src", "/images/head.jpg");
    }
  };

  const config = { attributes: true, childList: false, subtree: false};

  const observer = new MutationObserver((mutationsList, observer) => {
    for(const mutation of mutationsList) {
      if (mutation.type === 'attributes') {
        if (mutation.attributeName === 'class') {
          callback();
        }
      }
    }
  });

  observer.observe(document.body, config);

  callback();
})();
</script>

</body>
</html>
